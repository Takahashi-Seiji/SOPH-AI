<div class="row">
  <div class="bg-primary col-8" style="min-height: 100vh;">
    <h1 id="lecture-title"><%= @lecture.title %></h1>
    <h2 id="lecture-content"><%= simple_format(@lecture.content) %></h2>
  </div>

  <% if current_user.student? && @lecture.quiz_for_student(current_user) %>
    <%= turbo_frame_tag dom_id(@lecture) do %>
      <%= render 'student_quiz' %>
    <% end %>
  <% end %>
  <%= button_to 'Generate real Quiz', lecture_quizzes_path(@lecture), method: :post, data: { action: 'click->lecture#toggleQuiz' } %>

  <div class="col-4">
    <h1>Your notes: </h1>
    <div data-lecture-target="notes" class="notes-container">
      <% @notes.each do |note| %>
        <h2><%= simple_format(note.content) %></h2>
        <% end %>
    </div>
    <button data-action="click->lecture#displayNoteForm">Take notes</button>
    <button data-action="click->lecture#displayEditNoteForm">Edit your notes</button>
    <div class="d-none" data-lecture-target="noteForm">
      <%= simple_form_for [@lecture, Note.new], remote: true, data: {action: "submit->lecture#addNote"} do |f| %>
        <%= f.text_area :content, as: :text, data: {lecture_target: "noteContent"} %>
        <%= f.button :submit, "Save Note" %>
      <% end %>
    </div>
    <div class="d-none" data-lecture-target="editNoteForm">
      <%= simple_form_for [@lecture, @note], remote: true, data: {action: "submit->lecture#editNote"} do |f| %>
        <%= f.text_area :content, as: :text, data: {lecture_target: "noteContent"} %>
        <%= f.button :submit, "Update Note" %>
      <% end %>
    </div>
  <div data-controller="chat" class="bg-primary">
    <div data-chat-target="conversationDisplay">
      <h1>Conversation here</h1>
      <% @chat.messages.each do |message| %>
        <p><%= message.content %></p>
      <% end %>
    </div>
    <%= simple_form_for [@chat, Message.new], remote: true, data: {action: "submit->chat#message"} do |f| %>
      <%= f.text_area :content, as: :text, data: {chat_target: "messageContent"} %>
      <%= f.button :submit, "Send Message" %>
    <% end %>
  </div>
  </div>
</div>
